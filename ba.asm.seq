;*********************************;;         BASIC AID 64;      BASICAID.C64 V072882;       BASIC V2 EXTENSION;; (C) 1982 BY COMMODORE MACHINES;;  DOCUMENTED BY DENTON MARLOWE;********************************;;        COMPUTE!'S; MACHINE LANGAUGE ROUTINES;        FOR THE;      COMMODORE 64;;        CHAPTER 2;     PROGRAMMING AIDS;        PAGES 45-67;;********************************; SUMMARY OF COMMANDS;********************************; AUTO LINE NUMBER;  AUTO <LINE INCREMENT>;; ENTER MONITOR (MUST BE IN MEMORY);  BREAK;; SEARCH AND REPLACE STRING;  CHANGE/STRING/STRING/,LINE#;  OR;  CHANGE"STRING"STRING",LINE#;; COLD START;  COLD;; SCREEN PRINT;  CRT;; BLOCK DELETE;  DELETE <LINE# RANGE>;; LIST VARIABLES AND VALUES;  DUMP;; FIND STRING;  FIND/STRING/STRING/,LINE#;  OR;  FIND"STRING"STRING",LINE#;; LIST FILE TO SCREEN;  FLIST <"FILENAME">;; LAST LINE EXECUTED;  HELP;; CONVERT DECIMAL NUMBER TO HEX;  HEX <DECIMAL NUMBER>;; DISABLE BASIC AID;  KILL;; MERGE TWO PROGRAMS;  MERGE  <"FILENAME">;; RECLAIM NEW'ED PROGRAMS;  OLD;; RESTORE NORMAL IRQ VECTOR;  OFF;; REMOVE SPACES - THIS COMMAND IS BROKEN;  PACK;; READ SEQUENTIAL FILE;  READ  <"SEQ FILENAME">;; RENUMBER PROGRAM LINES;  RENUMBER;; TOGGLE REPEAT KEY FUNCTION;  REPEAT;; DISPLAY THE NUMBER OF BYTES IN A FILE;  SIZE;; ENABLE INTERRUPT-DRIVEN COMMANDS;  SCROLL;; READ STARTING ADDRESS OF PROGRAM;  START <"FILENAME">;; LIST DIRECTORY;  $ OR @$;; LOAD PROGRAM;  /FILENAME;; LOAD AND RUN PROGRAM;  UP ARROW FILENAME;;********************************; MAIN BODY OF CODE;********************************;*********************************; EXTERNAL ADDRESS EQUATES;********************************; ZERO PAGE EQUATES;********************************;********************************; $0200 PAGE EQUATES;********************************BASBUF=$0200;********************************; $0300 PAGE EQUATES;********************************;********************************; BASIC EQUATES;********************************READY=$A474LINKPG=$A533FNDLIN=$A613CLRENT=$A659LINGET=$A96BPRINTE=$AAD7ANDORE=$AEFDSGNENT=$BC49LINPRT=$BDCDFOUT=$BDDD;********************************; KERNAL STANDARD EQUATES;********************************SECOND=$FF93TKSA=$FF96ACPTR=$FFA5CIOUT=$FFA8UNTLK=$FFABUNLSN=$FFAELISTEN=$FFB1TALK=$FFB4READST=$FFB7SETLFS=$FFBAOPEN=$FFC0CLOSE=$FFC3CHKIN=$FFC6CHKOUT=$FFC9CLRCHN=$FFCCCHRIN=$FFCFCHROUT=$FFD2LOAD=$FFD5STOP=$FFE1CLALL=$FFE7;********************************; INTERNAL KERNAL ROUTINES;********************************RESET=$FCE2;********************************; ENTRY POINT;********************************BASAID LDA #$00       STA $0388       STA $0389       LDA XXCEF3       LDX XXCEF4       CPX #$A0       BCS XXC019       STA $37       STX $38       JSR CLRENTXXC019 LDX #$0FXXC01B LDA XXC02B,X       STA $73,X       DEX        BPL XXC01B       LDX #$13       JSR XXC03B       JMP XXC159;********************************;;********************************XXC02B INC $7A       BNE XXC031       INC $7BXXC031 LDA $01FF       JMP XXC09A;********************************;;********************************       NOP        JMP XXC0BF;********************************;;********************************XXC03B LDA XXCE2F,X       BEQ XXC046       JSR CHROUT       INX        BNE XXC03BXXC046 RTS ;********************************; KILL;********************************ZZC047 BNE XXC057       SEI        LDX #$17XXC04C LDA $E3A2,X       STA $73,X       DEX        BPL XXC04C       JMP XXC7BA;********************************;;********************************XXC057 JMP XXCDD9;********************************;;********************************XXC05A LDA $028D       AND #$01       BNE XXC05A       JSR XXC07D       BNE XXC07AXXC066 JSR XXC07D       BEQ XXC066       CMP #$FF       BEQ XXC066XXC06F JSR XXC07D       CMP #$FF       BNE XXC06F       LDA #$00       STA $C6XXC07A JMP STOP;********************************;;********************************XXC07D LDA $DC01       CMP $DC01       BNE XXC07D       CMP #$EFXXC087 RTS ;********************************;;********************************XXC088 STA $62       LDX #$90       SEC        JSR SGNENT       JMP FOUT;********************************;;********************************XXC093 INC $87       BNE XXC099       INC $88XXC099 RTS ;********************************;;********************************XXC09A STA $83       STX $97       TSX        LDA $0101,X       CMP #$8C       BEQ XXC0C9       LDX $7B       CPX #$02       BEQ XXC0B7       STX $8A       LDX $7A       STX $89       JMP XXC0B7;********************************;;********************************XXC0B5 LDY $85XXC0B7 LDX $97       LDA $83       CMP #$3A      ;':'       BCS XXC087XXC0BF CMP #$20      ;' '       BEQ XXC0C6       JMP $E3B3;********************************;;********************************XXC0C6 JMP $0073;********************************;;********************************XXC0C9 LDA $0102,X       CMP #$A4       BNE XXC0B7       JSR XXC0B7       BCC XXC122       LDA $83       BPL XXC0DB       INC $7AXXC0DB LDX #$00       STX $7F       STY $85XXC0E1 LDY $7AXXC0E3 LDA BASBUF,Y       SEC        SBC XXCE56,X       BEQ XXC0FF       CMP #$80       BEQ XXC103       INC $7FXXC0F2 INX        LDA XXCE55,X       BPL XXC0F2       LDA XXCE56,X       BNE XXC0E1       BEQ XXC0B5XXC0FF INX        INY        BNE XXC0E3XXC103 STY $7A       PLA        PLA        LDA $7F       ASL A       TAX        LDA XXCEC0,X       PHA        LDA XXCEBF,X       PHA        JSR XXC0B5       JMP $0073;********************************; AUTO;********************************ZZC119 JSR XXC3CF       STA $0388       JMP XXC202;********************************;;********************************XXC122 PLA        PLA        LDA $83       JSR LINGET       BEQ XXC154       LDA $0388       BEQ XXC154       CLC        LDA $14       ADC $0388       STA $63       LDA $15       ADC #$00       JSR XXC088       LDX #$00XXC141 LDA $0101,X       BEQ XXC14C       STA $0277,X       INX        BNE XXC141XXC14C LDA #$20      ;' '       STA $0277,X       INX        STX $C6XXC154 JMP $A49F;********************************; SCROLL;********************************ZZC157 BNE XXC16DXXC159 SEI        LDA XXCEF5       STA $0314       LDA XXCEF6       STA $0315       JSR XXCE1F       CLI        JMP READY;********************************;;********************************XXC16D JMP XXCDD9;********************************;;********************************XXC170 BIT $028D       ;BEQ XXC1A2       BEQ ZZC1A2       JSR XXC685XXC178 LDX #$00       STX $C7       STX $C6       STX $C5       CPX $D4       BEQ XXC188       STX $D4       BNE XXC18CXXC188 CPX $D8       BEQ XXC19CXXC18C STX $D8       INC $C6       LDY $D3       DEY        LDA #$20      ;' '       STA ($D1),Y       LDA #$9D       STA $0277XXC19C LDA $C5       CMP #$03       BEQ XXC170ZZC1A2 CMP #$04       BEQ XXC178       LDA XXCEF8       PHA        LDA XXCEF7       PHA        PHP        PHA        PHA        PHA        JMP $EA31;********************************; DELETE;********************************ZZC1B5 JSR XXC33D       LDA $5F       LDX $60       STA $24       STX $25       JSR FNDLIN       LDA $5F       LDX $60       BCC XXC1D3       LDY #$01       LDA ($5F),Y       BEQ XXC1D3       TAX        DEY        LDA ($5F),YXXC1D3 STA $7A       STX $7B       LDA $24       SEC        SBC $7A       TAX        LDA $25       SBC $7B       TAY        BCS XXC202       TXA        CLC        ADC $2D       STA $2D       TYA        ADC $2E       STA $2E       LDY #$00XXC1F1 LDA ($7A),Y       STA ($24),Y       INY        BNE XXC1F1       INC $7B       INC $25       LDA $2E       CMP $25       BCS XXC1F1XXC202 JSR LINKPG       LDA $22       LDX $23       CLC        ADC #$02       STA $2D       BCC XXC211       INX XXC211 STX $2E       JSR CLRENT       JMP READY;********************************; CHANGE AND FIND;********************************ZZC219 JSR $A579       JSR $0073       STA $83       LDX #$00       STX $49       JSR XXC2FD       LDA $7F       CMP #$03       BNE XXC235       LDX #$02       STX $49       JSR XXC2FDXXC235 JSR $0073       BEQ XXC23D       JSR ANDOREXXC23D JSR XXC33D       LDA $5F       LDX $60       STA $7A       STX $7B       JSR PRINTE       BNE XXC258XXC24D INY        TYA        CLC        ADC $7A       STA $7A       BCC XXC258       INC $7BXXC258 JSR XXC5C9       BEQ XXC262       JSR XXC367       BCS XXC265XXC262 JMP XXC202;********************************;;********************************XXC265 STY $55XXC267 INC $55       LDY $55       LDX $31       LDA $32       STA $83XXC271 LDA ($7A),Y       BEQ XXC24D       CMP BASBUF,X       BNE XXC267       INX        INY        DEC $83       BNE XXC271       DEY        STY $0B       STY $97       LDA $49       BEQ XXC2E4       JSR XXC37A       LDA $34       SEC        SBC $32       STA $9E       BEQ XXC2BDXXC295 INY XXC296 BEQ XXC262       LDA ($7A),Y       BNE XXC295       CLC        TYA        ADC $9E       CMP #$02       BCC XXC2E4       CMP #$4B      ;'K'       BCS XXC2E4       LDA $9E       BPL XXC2AE       DEC $83XXC2AE CLC        ADC $0B       STA $97       BCS XXC2BA       JSR XXC3B4       BEQ XXC2BDXXC2BA JSR XXC39CXXC2BD LDA $97       SEC        SBC $34       TAY        INY        LDA $34       BEQ XXC2D7       STA $85       LDX $33XXC2CC LDA BASBUF,X       STA ($7A),Y       INX        INY        DEC $85       BNE XXC2CCXXC2D7 CLC        LDA $2D       ADC $9E       STA $2D       LDA $2E       ADC $83       STA $2EXXC2E4 LDA $7A       LDX $7B       STA $5F       STX $60       LDX $43       LDA $44       JSR XXC412       JSR XXC05A       BEQ XXC296       LDY $97       JMP XXC265;********************************;;********************************XXC2FD LDY $7A       INY        STY $31,X       LDA #$00       STA $32,XXXC306 LDA BASBUF,Y       BEQ XXC33A       CMP $83       BEQ XXC314       INC $32,X       INY        BNE XXC306XXC314 STY $7A       RTS ;********************************; BREAK;********************************ZZC317 BNE XXC33A       STA $0203       STX $0204       STY $0205       PHP        PLA        STA $0202       LDA #$A4       PHA        LDA #$74       PHA        SEC        JMP ($0316);********************************;;********************************XXC331 CMP #$AB       BEQ XXC339       CMP #$2D      ;'-'       BNE XXC33AXXC339 RTS ;********************************;;********************************XXC33A JMP XXCDD9;********************************;;********************************XXC33D BCC XXC344       BEQ XXC344       JSR XXC331XXC344 JSR LINGET       JSR FNDLIN       JSR $0079       BEQ XXC35A       JSR XXC331       JSR $0073       JSR LINGET       BNE XXC33AXXC35A LDA $14       ORA $15       BNE XXC366       LDA #$FF       STA $14       STA $15XXC366 RTS ;********************************;;********************************XXC367 JSR XXC5C9       STA $43       JSR XXC5C9       STA $44       LDA $14       CMP $43       LDA $15       SBC $44       RTS ;********************************;;********************************XXC37A LDA $7A       STA $22       LDA $7B       STA $23       LDA $2D       STA $24       LDA $2E       STA $25       RTS ;********************************;;********************************XXC38B LDA $22       CMP $24       BNE XXC395       LDA $23       CMP $25XXC395 RTS ;********************************;;********************************XXC396 INC $22       BNE XXC39C       INC $23XXC39C LDY $0B       INY        LDA ($22),Y       LDY $97       INY        STA ($22),Y       JSR XXC38B       BNE XXC396       RTS ;********************************;;********************************XXC3AC LDA $24       BNE XXC3B2       DEC $25XXC3B2 DEC $24XXC3B4 LDY $0B       LDA ($24),Y       LDY $97       STA ($24),Y       JSR XXC38B       BNE XXC3AC       RTS ;********************************;;********************************XXC3C2 CMP #$22      ;'"'       BNE XXC3CE       PHA        LDA $0F       EOR #$80       STA $0F       PLA XXC3CE RTS ;********************************;;********************************XXC3CF JSR LINGET       LDA $15       BNE XXC3DA       LDA $14       BPL XXC3DCXXC3DA LDA #$7FXXC3DC RTS ;********************************;;********************************XXC3DD JMP XXCDD9;********************************; HELP;********************************ZZC3E0 BNE XXC3DD       JSR XXC3E8       JMP READY;********************************;;********************************XXC3E8 JSR PRINTE       STA $49       LDX $2B       LDA $2CXXC3F1 STX $5F       STA $60       LDY #$00       LDA ($5F),Y       TAX        INY        LDA ($5F),Y       BNE XXC402       JMP $0073;********************************;;********************************XXC402 CMP $8A       BCC XXC3F1       CPX $89       BCC XXC3F1       INY        LDA ($5F),Y       TAX        INY        LDA ($5F),Y;********************************       .BYTE $2C;********************************XXC412 LDY #$00       STY $7F       STY $0F       JSR LINPRT       LDA #$20      ;' 'XXC41D LDY $7F       AND #$7FXXC421 JSR CHROUT       JSR XXC3C2       LDA #$00       STA $C7       INY        BIT $49       BPL XXC447       LDX $60       TYA        SEC        ADC $5F       BCC XXC439       INX XXC439 CPX $8A       BCC XXC447       CMP $89       BCC XXC447       LDA #$01       STA $49       STA $C7XXC447 LDA ($5F),Y       BEQ XXC45C       BPL XXC421       CMP #$FF       BEQ XXC421       BIT $0F       BMI XXC421       STY $7F       JSR XXC47A       BMI XXC41DXXC45C JMP PRINTE;********************************;;********************************XXC45F RTS ;********************************;;********************************XXC460 LDX #$A0       LDY #$9D       STX $88       STY $87       SEC        SBC #$7F       TAX        LDY #$00XXC46E DEX        BEQ XXC45FXXC471 JSR XXC093       LDA ($87),Y       BPL XXC471       BMI XXC46EXXC47A JSR XXC460XXC47D INY        LDA ($87),Y       BMI XXC45F       JSR CHROUT       BNE XXC47D;********************************; RENUMBER;********************************ZZC487 JSR LINGET       LDY $14       LDX $15       TYA        ORA $15       BNE XXC495       LDY #$64XXC495 STY $35       STX $36       LDX #$00       LDA ($7A,X)       BNE XXC4A3       LDA #$0A       BNE XXC4ADXXC4A3 JSR ANDORE       JSR LINGET       LDA $14       LDX $15XXC4AD STA $33       STX $34       JSR $A68EXXC4B4 JSR XXC5C9       JSR XXC5C9       BNE XXC4DD       JSR XXC5ABXXC4BF JSR XXC5C9       JSR XXC5C9       BNE XXC4CA       JMP XXC202;********************************;;********************************XXC4CA JSR XXC5C9       LDA $63       STA ($7A),Y       JSR XXC5C9       LDA $62       STA ($7A),Y       JSR XXC5B6       BEQ XXC4BFXXC4DD JSR XXC5C9       JSR XXC5C9XXC4E3 JSR XXC5C9XXC4E6 CMP #$22      ;'"'       BNE XXC4F5XXC4EA JSR XXC5C9       BEQ XXC4B4       CMP #$22      ;'"'       BNE XXC4EA       BEQ XXC4E3XXC4F5 TAX        BEQ XXC4B4       BPL XXC4E3       LDX #$04XXC4FC CMP XXCE51,X       BEQ XXC506       DEX        BNE XXC4FC       BEQ XXC4E3XXC506 LDA $7A       STA $3B       LDA $7B       STA $3C       JSR $0073       BCS XXC4E6       JSR LINGET       JSR XXC550       LDA $3C       STA $7B       LDA $3B       STA $7A       LDY #$00       LDX #$00XXC525 LDA $0100,X       CMP #$30      ;'0'       BCC XXC53D       PHA        JSR $0073       BCC XXC535       JSR XXC581XXC535 PLA        LDY #$00       STA ($7A),Y       INX        BNE XXC525XXC53D JSR $0073       BCS XXC54AXXC542 JSR XXC590       JSR $0079       BCC XXC542XXC54A CMP #$2C      ;','       BEQ XXC506       BNE XXC4E6XXC550 JSR XXC5ABXXC553 JSR XXC5C9       JSR XXC5C9       BNE XXC563       LDA #$FF       STA $63       STA $62       BMI XXC571XXC563 JSR XXC5C9       CMP $14       BNE XXC579       JSR XXC5C9       CMP $15       BNE XXC57CXXC571 JSR $BDD1       LDA #$20      ;' '       JMP CHROUT;********************************;;********************************XXC579 JSR XXC5C9XXC57C JSR XXC5B6       BEQ XXC553XXC581 JSR XXC5A1       INC $97       JSR XXC3B4       INC $2D       BNE XXC58F       INC $2EXXC58F RTS ;********************************;;********************************XXC590 JSR XXC5A1       DEC $97       JSR XXC39C       LDA $2D       BNE XXC59E       DEC $2EXXC59E DEC $2D       RTS ;********************************;;********************************XXC5A1 JSR XXC37A       LDY #$00       STY $0B       STY $97       RTS ;********************************;;********************************XXC5AB LDA $35       STA $63       LDA $36       STA $62       JMP $A68E;********************************;;********************************XXC5B6 LDA $63       CLC        ADC $33       STA $63       LDA $62       ADC $34       STA $62XXC5C3 JSR XXC5C9       BNE XXC5C3       RTS ;********************************;;********************************XXC5C9 LDY #$00       INC $7A       BNE XXC5D1       INC $7BXXC5D1 LDA ($7A),Y       RTS ;********************************;;********************************XXC5D4 JMP READY;********************************; DUMP;********************************ZZC5D7 BNE XXC632       LDA $2D       STA $5F       LDA $2E       STA $60XXC5E1 LDA $5F       CMP $2F       LDA $60       SBC $30       BCS XXC5D4       LDY #$00       STY $24       INY XXC5F0 LDA ($5F),Y       ASL A       ROR $24       LSR A       STA $0045,Y       DEY        BPL XXC5F0       BIT $24       BEQ XXC61E       BPL XXC635       BVC XXC65D       JSR XXC670       LDX #$25      ;'%'       LDA #$3D      ;'='       JSR XXCE01       LDY #$02       LDA ($5F),Y       PHA        INY        LDA ($5F),Y       TAY        PLA        JSR $B391       JMP XXC62C;********************************;;********************************XXC61E JSR XXC670       LDA #$3D      ;'='       JSR CHROUT       JSR $B185       JSR $BBA2XXC62C JSR $BDD7       JMP XXC65A;********************************;;********************************XXC632 JMP XXCDD9;********************************;;********************************XXC635 JSR XXC670       LDX #$24      ;'$'       LDA #$3D      ;'='       JSR XXCE01       LDA #$22      ;'"'       JSR CHROUT       LDY #$04       LDA ($5F),Y       STA $23       DEY        LDA ($5F),Y       STA $22       DEY        LDA ($5F),Y       JSR $AB24       LDA #$22      ;'"'       JSR CHROUTXXC65A JSR PRINTEXXC65D JSR XXC05A       BEQ XXC682       CLC        LDA $5F       ADC #$07       STA $5F       BCC XXC66D       INC $60XXC66D JMP XXC5E1;********************************;;********************************XXC670 LDA $45       JSR CHROUT       LDA $46       BEQ XXC67C       JSR CHROUTXXC67C RTS ;********************************; CRT;********************************ZZC67D BNE XXC632       JSR XXC685XXC682 JMP READY;********************************;;********************************XXC685 LDA #$04       STA $23       LDA #$00       STA $22       LDA #$04       TAX        LDY #$FF       JSR SETLFS       JSR OPEN       JSR READST       BNE XXC708       LDX #$04       JSR CHKOUT       LDA #$19       STA $25XXC6A6 LDA #$0D       STA $0F       JSR CHROUT       LDA #$11       LDX $D018       CPX #$15       BNE XXC6B8       LDA #$91XXC6B8 JSR CHROUT       LDY #$00XXC6BD LDA ($22),Y       AND #$7F       TAX        LDA ($22),Y       EOR $0F       BPL XXC6D3       LDA ($22),Y       STA $0F       AND #$80       EOR #$92       JSR CHROUTXXC6D3 TXA        CMP #$20      ;' '       BCS XXC6DC       ORA #$40      ;'@'       BNE XXC6EAXXC6DC CMP #$40      ;'@'       BCC XXC6EA       CMP #$60       BCS XXC6E8       ORA #$80       BNE XXC6EAXXC6E8 EOR #$C0XXC6EA JSR CHROUT       INY        CPY #$28      ;'('       BCC XXC6BD       LDA $22       ADC #$27      ;'''       STA $22       BCC XXC6FC       INC $23XXC6FC DEC $25       BNE XXC6A6       LDA #$0D       JSR CHROUT       JSR CHROUTXXC708 LDA #$04       JSR CLOSE       JMP CLRCHN;********************************;;********************************XXC710 JMP XXCDD9;********************************;;********************************XXC713 JMP XXC202;********************************; PACK;********************************ZZC716 BNE XXC710       LDA $2B       STA $87       STA $22       LDA $2C       STA $88       STA $23XXC724 LDY #$03XXC726 LDA ($87),Y       STA ($22),Y       DEY        BPL XXC726       INY        STY $0F       LDA ($22),Y       INY        ORA ($22),Y       BEQ XXC713       LDY #$04       LDA ($87),Y       CMP #$3A      ;':'       BNE XXC745       INY        LDA ($87),Y       BEQ XXC774       DEY XXC745 LDA ($87),Y       CMP #$8F       BEQ XXC774       BIT $0F       BVS XXC753       CMP #$3A      ;':'       BEQ XXC75BXXC753 CMP #$20      ;' '       BNE XXC760       BIT $0F       BMI XXC760XXC75B JSR XXC093       BNE XXC745XXC760 TAX        LDA #$40      ;'@'       ORA $0F       STA $0F       TXA        STA ($22),Y       INY        CMP #$00       BEQ XXC79D       JSR XXC3C2       BNE XXC745XXC774 DEY        BIT $0F       BVS XXC786       LDY #$00       CLC        LDA $87       ADC #$04       STA $87       BCC XXC786       INC $88XXC786 LDA ($87),Y       BEQ XXC78F       JSR XXC093       BNE XXC786XXC78F BIT $0F       BVC XXC798       STA ($22),Y       INY        BPL XXC79DXXC798 JSR XXC093       BNE XXC724XXC79D TYA        TAX        LDY #$01       LDA ($22),Y       STA $88       DEY        LDA ($22),Y       STA $87       CLC        TXA        ADC $22       STA $22       BCC XXC7B4       INC $23XXC7B4 JMP XXC724;********************************; OFF;********************************ZZC7B7 BNE XXC7C3       SEI XXC7BA LDX #$0C       JSR $FCB8       CLI        JMP READY;********************************;;********************************XXC7C3 JMP XXCDD9;********************************; OLD;********************************ZZC7C6 BNE XXC7C3       LDY #$01       LDA $2C       STA ($2B),Y       JMP XXC202;********************************; > AND @;********************************ZZC7D1 LDY #$00       STY $86       CMP #$00       BEQ XXC7F9       CMP #$24      ;'$'       BEQ XXC81D       LDA #$08       STA $BA       JSR LISTEN       LDA #$6F       JSR SECONDXXC7E9 LDA ($7A),Y       BEQ XXC7F3       JSR CIOUT       INY        BNE XXC7E9XXC7F3 JSR UNLSN       JMP READY;********************************;;********************************XXC7F9 LDA #$08       STA $BA       JSR TALK       LDA #$6F       JSR TKSAXXC805 JSR ACPTR       CMP #$0D       BEQ XXC811       JSR CHROUT       BNE XXC805XXC811 JSR UNTLK       JMP XXC880;********************************; UP ARROW;********************************ZZC817 LDA #$5E      ;'^';********************************; /;********************************ZZC819 STA $86       LDY #$00XXC81D INY        LDA ($7A),Y       BNE XXC81D       STY $B7       LDA $7A       STA $BB       LDA $7B       STA $BC       LDA #$08       STA $BA       LDA $86       BNE XXC886       LDA #$60       STA $B9       JSR $F3D5       LDA $BA       JSR TALK       LDA $B9       JSR TKSA       JSR PRINTE       LDA #$00       STA $90       LDY #$03XXC84E STY $B7XXC850 JSR ACPTR       TAX        LDY $90       BNE XXC87D       JSR ACPTR       LDY $90       BNE XXC87D       DEC $B7       BNE XXC850       JSR LINPRT       JSR $AB3FXXC869 JSR ACPTR       BEQ XXC873       JSR CHROUT       BNE XXC869XXC873 JSR PRINTE       LDY #$02       JSR XXC05A       BNE XXC84EXXC87D JSR $F642XXC880 JSR PRINTE       JMP READY;********************************;;********************************XXC886 LDA #$00       STA $90       STA $93       JSR LOAD       LDA $90       AND #$BF       BNE XXC8B2       LDA $AF       STA $2E       LDA $AE       STA $2D       JSR CLRENT       JSR LINKPG       LDA $86       CMP #$5E      ;'^'       BEQ XXC8AC       JMP READY;********************************;;********************************XXC8AC JSR $A68E       JMP $A7AE;********************************;;********************************XXC8B2 JMP $F704;********************************;;********************************XXC8B5 LDA $ECF0,X       STA $7A       JSR XXC8C3       STA $7B       JSR XXCB28       RTS ;********************************;;********************************XXC8C3 LDA $D9,XXXC8C5 AND #$03       ORA $0288       RTS ;********************************;;********************************XXC8CB JMP $EA81;********************************;;********************************ZZC8CE LDA $C6       BEQ XXC8CB       LDA $D3       CMP #$02       BCS XXC8CB       LDA $0277       AND #$7F       CMP #$11       BNE XXC8CB       LDA $0801       ORA $0802       BEQ XXC8CB       LDA #$00       STA $0384       STA $0386       LDA #$27      ;'''       STA $0387       LDA #$18       STA $0385       JSR XXCB19       LDA $0277       BMI XXC95F       LDX $D6       CPX #$18       BNE XXC95C       STX $0383       STX $0381XXC90F DEX        BMI XXC94D       LDY $D9,X       BPL XXC90F       JSR XXC8B5       BCS XXC90F       JSR LINGET       INC $14       BNE XXC924       INC $15XXC924 JSR FNDLIN       BCS XXC939       BNE XXC939       JSR XXCA31       JSR XXCA31       LDA #$00       STA $14       STA $15       BEQ XXC924XXC939 JSR XXCA31       DEC $0381       LDA $D9       BPL XXC939XXC943 JSR XXCA60       LDA $D9       BMI XXC94D       JSR XXCA31XXC94D LDX #$00XXC94F LDA $0278,X       STA $0277,X       INX        CPX $C6       BNE XXC94F       DEC $C6XXC95C JMP $EA81;********************************;;********************************XXC95F LDX $D6       BNE XXC95C       STX $0381       STX $0383       DEX XXC96A INX        CPX #$19       BCS XXC94D       LDY $D9,X       BPL XXC96A       JSR XXC8B5       BCS XXC96A       JSR LINGETXXC97B JSR FNDLIN       LDA $5F       LDX $60       CMP $2B       BNE XXC998       CPX $2C       BNE XXC998       JSR XXCA13       JSR XXCA13       LDA #$FF       STA $14       STA $15       BNE XXC97BXXC998 STA $BB       DEX        STX $BC       LDY #$FFXXC99F INY        LDA ($BB),YXXC9A2 TAX        BNE XXC99F       INY        LDA ($BB),Y       CMP $5F       BNE XXC9A2       INY        LDA ($BB),Y       CMP $60       BNE XXC9A2       DEY        TYA        CLC        ADC $BB       STA $5F       LDA $BC       ADC #$00       STA $60       LDA $F1       BMI XXC9C7       JSR XXCA13XXC9C7 JSR XXCA13       JMP XXC943;********************************;;********************************XXC9CD LDA $ECF0,X       STA $24       JSR XXC8C3       STA $25       LDA $D9,X       ORA #$80       RTS ;********************************;;********************************XXC9DC BMI XXC9E0       AND #$7FXXC9E0 STA $D9,X       LDY $0386       DEY        RTS ;********************************;;********************************XXC9E7 JSR XXC8C5       STA $23XXC9EC INY        LDA ($22),Y       STA ($24),Y       LDA $23       PHA        AND #$03       ORA #$D8       STA $23       LDA $25       PHA        AND #$03       ORA #$D8       STA $25       LDA ($22),Y       STA ($24),Y       PLA        STA $25       PLA        STA $23       CPY $0387       BCC XXC9EC       RTS ;********************************;;********************************XXCA13 LDX $0385       INX XXCA17 DEX        JSR XXC9CD       LDY $D8,X       JSR XXC9DC       CPX $0384       BEQ XXCA4F       LDA $ECEF,X       STA $22       LDA $D8,X       JSR XXC9E7       BCS XXCA17XXCA31 LDX $0384       DEX XXCA35 INX        JSR XXC9CD       LDY $DA,X       JSR XXC9DC       CPX $0385       BCS XXCA4F       LDA $ECF1,X       STA $22       LDA $DA,X       JSR XXC9E7       BCS XXCA35XXCA4F LDA #$20      ;' 'XXCA51 INY        STA ($24),Y       CPY $0387       BCC XXCA51       LDA $D9,X       ORA #$80       STA $D9,X       RTS ;********************************;;********************************XXCA60 LDX #$00       STX $0F       STX $0382       LDX $0381       LDA $ECF0,X       STA $BB       JSR XXC8C3       STA $BC       JSR XXCB4C       STA $63       JSR XXCB4F       JSR XXC088       LDX #$00XXCA81 LDA $0101,X       BEQ XXCA8C       JSR XXCABC       INX        BNE XXCA81XXCA8C LDA #$20      ;' 'XXCA8E AND #$7FXXCA90 JSR XXCABC       JSR XXCB4F       PHP        JSR XXC3C2       PLP        BMI XXCAA1       BEQ XXCAE4       BNE XXCA90XXCAA1 CMP #$FF       BEQ XXCA90       BIT $0F       BMI XXCA90       JSR XXC460XXCAAC INY        LDA ($87),Y       BMI XXCA8E       STY $8A       JSR XXCABC       LDY $8A       BNE XXCAAC       LDA #$20      ;' 'XXCABC JSR XXCB5A       LDY #$00       STA ($BB),Y       LDA $BC       PHA        AND #$03       ORA #$D8       STA $BC       LDA $0286       STA ($BB),Y       PLA        STA $BC       INC $BB       BNE XXCADA       INC $BCXXCADA INC $0382       LDA $0382       CMP #$28      ;'('       BEQ XXCAE5XXCAE4 RTS ;********************************;;********************************XXCAE5 LDA $0383       BEQ XXCAFB       LDY $0381       CPY #$18       BEQ XXCB18       TXA        PHA        DEC $0385       JSR XXCA31       BCS XXCB03XXCAFB TXA        PHA        INC $0384       JSR XXCA13XXCB03 JSR XXC8C5       STA $BC       AND #$7F       STA $D9,X       LDA $ECF0,X       STA $BB       LDA #$00       STA $0382       PLA        TAX XXCB18 RTS ;********************************;;********************************XXCB19 LDA $CF       BEQ XXCB27       LDY #$00       STY $CF       LDY $D3       LDA $CE       STA ($D1),YXXCB27 RTS ;********************************;;********************************XXCB28 LDY #$00       STY $0382       BEQ XXCB3FXXCB2F INC $7A       BNE XXCB35       INC $7BXXCB35 INC $0382       LDA $0382       CMP #$28      ;'('       BCS XXCB27XXCB3F LDA ($7A),Y       CMP #$3A      ;':'       BCS XXCB27       CMP #$20      ;' '       BEQ XXCB2F       JMP $E3B3;********************************;;********************************XXCB4C JSR XXCB4FXXCB4F INC $5F       BNE XXCB55       INC $60XXCB55 LDY #$00       LDA ($5F),Y       RTS ;********************************;;********************************XXCB5A STA $89       AND #$7F       CMP #$20      ;' '       PHP        AND #$3F      ;'?'       PLP        BCS XXCB68       ORA #$80XXCB68 BIT $89       BPL XXCB6E       ORA #$40      ;'@'XXCB6E RTS ;********************************;;********************************XXCB6F PLA        PLA XXCB71 JSR PRINTEXXCB74 JSR CLRCHN       LDA #$01       JSR CLOSE       LDA #$02       JSR CLOSE       JMP READY;********************************;;********************************XXCB84 JSR CHRIN       JSR CHRIN       BEQ XXCB6F       LDA $90       BNE XXCB6F       LDX #$FF       JSR CHRIN       STA $14       JSR CHRIN       STA $15XXCB9C INX        CPX #$4E      ;'N'       BCS XXCBA9       JSR CHRIN       STA BASBUF,X       BNE XXCB9CXXCBA9 INX        INX        STA BASBUF,X       INX        INX        INX        STX $0B       RTS ;********************************; MERGE;********************************ZZCBB4 JSR XXCCE3XXCBB7 LDX #$02       STX $98       JSR CHKIN       JSR XXCB84       JSR XXCD11       JSR FNDLIN       BCC XXCC0D       LDY #$01       LDA ($5F),Y       STA $23       LDA $2D       STA $22       LDA $60       STA $25       LDA $5F       DEY        SBC ($5F),Y       CLC        ADC $2D       STA $2D       STA $24       LDA $2E       ADC #$FF       STA $2E       SBC $60       TAX        SEC        LDA $5F       SBC $2D       TAY        BCS XXCBF7       INX        DEC $25XXCBF7 CLC        ADC $22       BCC XXCBFF       DEC $23       CLC XXCBFF LDA ($22),Y       STA ($24),Y       INY        BNE XXCBFF       INC $23       INC $25       DEX        BNE XXCBFFXXCC0D JSR CLRENT       JSR LINKPG       LDA BASBUF       BNE XXCC1B       JMP XXCBB7;********************************;;********************************XXCC1B CLC        LDA $2D       STA $5A       ADC $0B       STA $58       LDY $2E       STY $5B       BCC XXCC2B       INY XXCC2B STY $59       JSR $A3B8       LDA $14       LDY $15       STA $01FE       STY $01FF       LDA $31       LDY $32       STA $2D       STY $2E       LDY $0B       DEY XXCC45 LDA $01FC,Y       STA ($5F),Y       DEY        BPL XXCC45       JSR CLRENT       JSR LINKPG       JMP XXCBB7;********************************;;********************************XXCC56 LDX #$01       JSR CHKIN       JSR CHRIN       STA $89       JSR CHRIN       STA $8A       ORA $89       CMP #$30      ;'0'       BEQ XXCC81       LDX $89       LDA $8A       JSR XXCE01XXCC72 JSR CHRIN       JSR CHROUT       CMP #$0D       BNE XXCC72       PLA        PLA        JMP XXCB74;********************************;;********************************XXCC81 JSR CHRIN       CMP #$0D       BNE XXCC81       JMP CLRCHN;********************************; HEX;********************************ZZCC8B BEQ XXCCD1       CMP #$24      ;'$'       BEQ XXCCA8       JSR $0079       JSR $BCF3       JSR $B7F7       LDA $15       STA $C2       LDA $14       STA $C1       JSR XXCD42       JMP READY;********************************;;********************************XXCCA8 LDA #$00       STA $62       STA $63       LDA #$04       STA $64XXCCB2 JSR XXC5C9       BEQ XXCCCB       JSR XXCDE0       LDX #$04XXCCBC ASL $63       ROL $62       DEX        BNE XXCCBC       ORA $63       STA $63       DEC $64       BNE XXCCB2XXCCCB JSR $BDD1       JMP XXC880;********************************;;********************************XXCCD1 JMP XXCDD9;********************************;;********************************XXCCD4 JSR CHRIN       STA $C2       LDX #$00       JSR XXC03B       PLA        PLA        JMP XXCD35;********************************;;********************************XXCCE3 JSR XXCD94       JSR CHRIN       STA $C1       CMP #$01       BNE XXCCD4       JSR CHRIN       STA $C2       JMP PRINTE;********************************; FLIST;********************************ZZCCF7 JSR XXCCE3XXCCFA JSR XXCB84       JSR XXCD11       BNE XXCCFAXXCD02 PLA        PLA XXCD04 LDY #$00XXCD06 LDA $A381,Y       BEQ XXCD38       JSR CHROUT       INY        BNE XXCD06XXCD11 LDA #$FF       STA $5F       LDA #$01       STA $60       STA $49       LDX $14       LDA $15       JSR XXC412       JSR XXC05A       BEQ XXCD02       RTS ;********************************; START;********************************ZZCD28 JSR XXCD94       JSR CHRIN       STA $C1       JSR CHRIN       STA $C2XXCD35 JSR XXCD3BXXCD38 JMP XXCB74;********************************;;********************************XXCD3B LDX $C1       LDA $C2       JSR LINPRTXXCD42 LDX #$20      ;' '       LDA #$24      ;'$'       JSR XXCE01       JSR XXCDEB       JMP PRINTE;********************************; SIZE;********************************ZZCD4F BEQ XXCD67       LDX #$FE       STX $C1       INX        STX $C2       JSR XXCD94XXCD5B JSR CHRIN       JSR XXCE14       LDY $90       BEQ XXCD5B       BNE XXCD35XXCD67 SEC        LDA $2D       SBC $2B       STA $C1       LDA $2E       SBC $2C       STA $C2       JSR XXCD3B       JMP READY;********************************; READ;********************************ZZCD7A JSR XXCD98XXCD7D JSR CHRIN       LDY $90       PHP        JSR CHROUT       PLP        BNE XXCD91       JSR XXC05A       BNE XXCD7D       JMP XXCD04;********************************;;********************************XXCD91 JMP XXCB71;********************************;;********************************XXCD94 LDA #$00       BEQ XXCD9AXXCD98 LDA #$02XXCD9A STA $86       JSR CLALL       JSR $E257       LDX $B7       BEQ XXCDD9       STX $0F       LDA #$01       STA $B8       LDA #$08       STA $BA       LDA #$0F       STA $B9       LDA #$00       STA $B7       JSR OPEN       JSR CLRCHN       LDA $0F       STA $B7       LDA #$02       STA $B8       LDA #$08       STA $BA       LDA $86       STA $B9       JSR OPEN       JSR XXCC56       LDX #$02       JMP CHKIN;********************************;;********************************XXCDD9 LDA #$FF       STA $3A       JMP $AF08;********************************;;********************************XXCDE0 CMP #$3A      ;':'       PHP        AND #$0F       PLP        BCC XXCDEA       ADC #$08XXCDEA RTS ;********************************;;********************************XXCDEB LDA $C2       JSR XXCDF2       LDA $C1XXCDF2 PHA        LSR A       LSR A       LSR A       LSR A       JSR XXCE0A       TAX        PLA        AND #$0F       JSR XXCE0AXXCE01 PHA        TXA        JSR CHROUT       PLA        JMP CHROUT;********************************;;********************************XXCE0A CLC        ADC #$F6       BCC XXCE11       ADC #$06XXCE11 ADC #$3A      ;':'       RTS ;********************************;;********************************XXCE14 INC $C1       BNE XXCE1E       INC $C2       BNE XXCE1E       INC $BEXXCE1E RTS ;********************************;;********************************XXCE1F LDA $028A       EOR #$80       STA $028A       RTS ;********************************; REPAET;********************************ZZCE28 JSR XXCE1F       JMP READY;********************************; STORAGE;********************************       .BYTE $A7;********************************; MESSAGE;********************************XXCE2F .BYTE $0D       .BYTE 'NOT BASIC, START='       .BYTE $00;       .BYTE $93 ; CLEAR SCREEN       .BYTE 'BASIC-AID 2'       .BYTE $0D ; RETURN       .BYTE $11 ; DOWN       .BYTE $00;********************************; STORAGE;********************************XXCE51 .BYTE $00       .BYTE $89 ; GOTO        .BYTE $8A ; RUN       .BYTE $8D ; GOSUB ;********************************; COMMANDS;; 26 = $1A;; HELP; AUTO; BREAK; CHANGE; DELETE; FLIST; DUMP; FIND; HEX; CRT; KILl; MERGE; RENUMBER; OFF; PACK; READ; SCROLL; START; REPEAT; >; @; /; UP ARROW; SIZE; OLD; COLD;********************************;XXCE55 .BYTE $A7XXCE56 .BYTE 'HEL'       .BYTE $D0;       .BYTE 'AUT'       .BYTE $CF;       .BYTE 'BREA'       .BYTE $CB;       .BYTE 'CHANG'       .BYTE $C5;       .BYTE 'DELET'       .BYTE $C5;       .BYTE 'FLIS'       .BYTE $D4;       .BYTE 'DUM'       .BYTE $D0;       .BYTE 'FIN'       .BYTE $C4;       .BYTE 'HE'       .BYTE $D8;       .BYTE 'CR'       .BYTE $D4;       .BYTE 'KIL'       .BYTE $CC;       .BYTE 'MERG'       .BYTE $C5;       .BYTE 'RENUMBE'       .BYTE $D2;       .BYTE 'OF'       .BYTE $C6;       .BYTE 'PAC'       .BYTE $CB;       .BYTE 'REA'       .BYTE $C4;       .BYTE 'SCROL'       .BYTE $CC;       .BYTE 'STAR'       .BYTE $D4;       .BYTE 'REPEA'       .BYTE $D4;       .BYTE $BE ; > $3E + $80;       .BYTE $C0 ; @ $40 + $80;       .BYTE $AF ; / $2F + $80;       .BYTE $DE ; UP ARROW $5E+ $80 ;       .BYTE 'SIZ'       .BYTE $C5;       .BYTE 'OL'       .BYTE $C4;       .BYTE 'COL'       .BYTE $C4;       .BYTE $00;**************************************; VECTOR TABLE - ADDRESS - 1;**************************************; HELP;XXCEBF .BYTE $DF;XXCEC0 .BYTE $C3XXCEBF .BYTE <ZZC3E0-1XXCEC0 .BYTE >ZZC3E0; AUTO       ;.BYTE $18       ;.BYTE $C1       .WORD ZZC119-1; BREAK       ;.BYTE $16       ;.BYTE $C3       .WORD ZZC317-1; CHANGE       ;.BYTE $18       ;.BYTE $C2       .WORD ZZC219-1; DELETE       ;.BYTE $B4       ;.BYTE $C1       .WORD ZZC1B5-1; FLIST       ;.BYTE $F6       ;.BYTE $CC       .WORD ZZCCF7-1; DUMP       ;.BYTE $D6       ;.BYTE $C5       .WORD ZZC5D7-1; FIND       ;.BYTE $18       ;.BYTE $C2       .WORD ZZC219-1; HEX       ;.BYTE $8A       ;.BYTE $CC       .WORD ZZCC8B-1; CRT       ;.BYTE $7C       ;.BYTE $C6       .WORD ZZC67D-1; KILl       ;.BYTE $46       ;.BYTE $C0       .WORD ZZC047-1; MERGE       ;.BYTE $B3       ;.BYTE $CB       .WORD ZZCBB4-1; RENUMBER       ;.BYTE $86       ;.BYTE $C4       .WORD ZZC487-1; OFF       ;.BYTE $B6       ;.BYTE $C7       .WORD ZZC7B7-1; PACK       ;.BYTE $15       ;.BYTE $C7       .WORD ZZC716-1; READ       ;.BYTE $79       ;.BYTE $CD       .WORD ZZCD7A-1; SCROLL       ;.BYTE $56       ;.BYTE $C1       .WORD ZZC157-1; START       ;.BYTE $27       ;.BYTE $CD       .WORD ZZCD28-1; REPEAT       ;.BYTE $27       ;.BYTE $CE       .WORD ZZCE28-1; >       ;.BYTE $D0       ;.BYTE $C7       .WORD ZZC7D1-1; @       ;.BYTE $D0       ;.BYTE $C7       .WORD ZZC7D1-1; /       ;.BYTE $18       ;.BYTE $C8       .WORD ZZC819-1; UP ARROW       ;.BYTE $16       ;.BYTE $C8       .WORD ZZC817-1; SIZE       ;.BYTE $4E       ;.BYTE $CD       .WORD ZZCD4F-1; OLD       ;.BYTE $C5       ;.BYTE $C7       .WORD ZZC7C6-1; COLD       ;.BYTE $E1       ;.BYTE $FC       .WORD RESET-1;********************************;;********************************XXCEF3 .BYTE <BASAID ;$00XXCEF4 .BYTE >BASAID ;$C0;XXCEF5 .BYTE <XXC19C ;$9CXXCEF6 .BYTE >XXC19C ;$C1;XXCEF7 .BYTE <ZZC8CE ;$CEXXCEF8 .BYTE >ZZC8CE ;$C8;********************************; AUTHOR AND DATE CODE; SL 19 APRIL 1984;********************************       ;.BYTE 'SL190484'WWCEF9 .BYTE $53       .BYTE $4C       .BYTE $31       .BYTE $39       .BYTE $30       .BYTE $34       .BYTE $38       .BYTE $34;********************************;;********************************WWCF01 .BYTE $FF       .BYTE $0D       .BYTE $0D       .BYTE $0D       .BYTE $0D;********************************THEEND=*;********************************;;********************************.END